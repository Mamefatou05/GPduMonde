<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Nav with Tailwind</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="../path/to/flowbite/dist/flowbite.min.js"></script>
</head>
<style>
    .bg-custom {
        background-image: url('assets/bgCargo.jpg');
        background-size: cover;
        background-position: center;
    }
    .transition-bg {
        transition: background-color 0.3s ease;
    }
</style>
<body class="flex flex-col min-h-screen bg-custom">

    <nav id="navbar" class="w-full fixed top-0 left-0 z-10 transition-bg">
        <ul class="flex justify-around p-4">
            <li><a href="#" class="font-bold text-white" id="nav-home">Home</a></li>
            <li><a href="#" class="font-bold text-white" id="nav-about">About</a></li>
            <li><a href="#" class="font-bold text-white" id="nav-services">Services</a></li>
            <li><a href="#" class="font-bold text-white" id="nav-contact">Contact</a></li>
        </ul>
    </nav>

    <main class="flex-grow pt-16 p-4">
        <h1 class="text-3xl font-bold text-white">Welcome to My Website</h1>
        <p class="text-white">Scroll down to see the effect...</p>
        <p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non urna sit amet velit convallis ultrices. Etiam a cursus eros. Fusce at massa nec libero vulputate euismod. Suspendisse potenti. Vivamus vel lectus nec lorem volutpat tincidunt. Cras volutpat nisl sit amet urna dapibus, nec vulputate risus vestibulum. Integer feugiat quam ac lacus vulputate, sit amet convallis mi pulvinar. Proin suscipit, libero a malesuada tincidunt, nisi purus fermentum velit, a auctor nunc arcu in elit. Pellentesque auctor lacus nec neque tristique efficitur.</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <h1 class="text-3xl font-bold text-white">Welcome to My Website</h1>
        <p class="text-white">Scroll down to see the effect...</p>
        <p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non urna sit amet velit convallis ultrices. Etiam a cursus eros. Fusce at massa nec libero vulputate euismod. Suspendisse potenti. Vivamus vel lectus nec lorem volutpat tincidunt. Cras volutpat nisl sit amet urna dapibus, nec vulputate risus vestibulum. Integer feugiat quam ac lacus vulputate, sit amet convallis mi pulvinar. Proin suscipit, libero a malesuada tincidunt, nisi purus fermentum velit, a auctor nunc arcu in elit. Pellentesque auctor lacus nec neque tristique efficitur.</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <h1 class="text-3xl font-bold text-white">Welcome to My Website</h1>
        <p class="text-white">Scroll down to see the effect...</p>
        <p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non urna sit amet velit convallis ultrices. Etiam a cursus eros. Fusce at massa nec libero vulputate euismod. Suspendisse potenti. Vivamus vel lectus nec lorem volutpat tincidunt. Cras volutpat nisl sit amet urna dapibus, nec vulputate risus vestibulum. Integer feugiat quam ac lacus vulputate, sit amet convallis mi pulvinar. Proin suscipit, libero a malesuada tincidunt, nisi purus fermentum velit, a auctor nunc arcu in elit. Pellentesque auctor lacus nec neque tristique efficitur.</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <h1 class="text-3xl font-bold text-white">Welcome to My Website</h1>
        <p class="text-white">Scroll down to see the effect...</p>
        <p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non urna sit amet velit convallis ultrices. Etiam a cursus eros. Fusce at massa nec libero vulputate euismod. Suspendisse potenti. Vivamus vel lectus nec lorem volutpat tincidunt. Cras volutpat nisl sit amet urna dapibus, nec vulputate risus vestibulum. Integer feugiat quam ac lacus vulputate, sit amet convallis mi pulvinar. Proin suscipit, libero a malesuada tincidunt, nisi purus fermentum velit, a auctor nunc arcu in elit. Pellentesque auctor lacus nec neque tristique efficitur.</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <h1 class="text-3xl font-bold text-white">Welcome to My Website</h1>
        <p class="text-white">Scroll down to see the effect...</p>
        <p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam non urna sit amet velit convallis ultrices. Etiam a cursus eros. Fusce at massa nec libero vulputate euismod. Suspendisse potenti. Vivamus vel lectus nec lorem volutpat tincidunt. Cras volutpat nisl sit amet urna dapibus, nec vulputate risus vestibulum. Integer feugiat quam ac lacus vulputate, sit amet convallis mi pulvinar. Proin suscipit, libero a malesuada tincidunt, nisi purus fermentum velit, a auctor nunc arcu in elit. Pellentesque auctor lacus nec neque tristique efficitur.</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
        <p class="text-white">...More content...</p>
    </main>

    <footer class="bg-white text-white text-center p-4">
        <p>Footer content here</p>
    </footer>

    <script>
        window.onscroll = function() {
            var navbar = document.getElementById("navbar");
            var navLinks = document.querySelectorAll("#navbar a");
            if (window.pageYOffset > 0) {
                navbar.classList.add("bg-white");
                navLinks.forEach(link => {
                    link.classList.add("text-black");
                    link.classList.remove("text-white");
                });
            } else {
                navbar.classList.remove("bg-white");
                navLinks.forEach(link => {
                    link.classList.add("text-white");
                    link.classList.remove("text-black");
                });
            }
        };
    </script>

</body>
</html>
async function toggleCargoState(id: string) {
    const cargo = filteredCargos.find(c => c.id.toString() === id);
    if (!cargo) return;

    if (cargo.etat_globale === 'fermé' && cargo.etat_Avancement !== 'En attente') {
        alert('La cargaison ne peut pas être rouverte car elle n\'est pas en attente.');
        return;
    }

    const newState = cargo.etat_globale === 'ouvert' ? 'fermé' : 'ouvert';

    // Mettre à jour l'état sur le serveur
    try {
        const response = await fetch('api.php', {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ ...cargo, etat_globale: newState })
        });

        if (!response.ok) {
            throw new Error('Failed to update cargo state');
        }

        // Mettre à jour l'état localement si la mise à jour sur le serveur a réussi
        cargo.etat_globale = newState;
        displayCargos(filteredCargos);

    } catch (error) {
        console.error('Error updating cargo state:', error);
    }
}
async function init() {
    const cargaisons = await fetchCargos();
    filteredCargos = cargaisons; // Mettez à jour la liste filtrée
    console.log('azerty');
    displayCargos(filteredCargos);
}

init();
export function displayCargos(cargaisons: ICargaison[]): void {
    const tableBody = document.getElementById('cargoTableBody') as HTMLTableElement;
    tableBody.innerHTML = '';

    const start = (currentPage - 1) * rowsPerPage;
    const end = start + rowsPerPage;
    const paginateCargos = cargaisons.slice(start, end);

    for (const cargo of paginateCargos) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td class="border p-2">${cargo.numero}</td>
            <td class="border p-2">${cargo.mode_remplissage}</td>
            <td id="champ_value" class="border p-2">${cargo.mode_remplissage === 'produitMax' ? cargo.produitMax : cargo.poidsMax}</td>
            <td class="border p-2">${cargo.dateDepart}</td>
            <td class="border p-2">${cargo.dateArrivee}</td>
            <td class="border p-2">${cargo.prix_total}</td>
            <td class="border p-2">${cargo.lieu_depart}</td>
            <td class="border p-2">${cargo.lieu_arrivee}</td>
            <td class="border p-2">${cargo.distanceKm}</td>
            <td class="border p-2">${cargo.type}</td>
            <td class="border p-2">${cargo.etat_Avancement}</td>
            <td class="border p-2">${cargo.etat_globale}</td>
            <td class="border p-2">
                ${cargo.etat_globale === 'ouvert' ? `<a href="details.php?id=${cargo.id}" class="detail-btn">Détails</a>` : ''}
                <button class="state-btn" data-id="${cargo.id}">${cargo.etat_globale === 'ouvert' ? 'Fermer' : 'Ouvrir'}</button>
            </td>
        `;
        tableBody.appendChild(row);
    }

    attachEventListeners();
    PaginationFonction();
}
<?php
// Charger les données des cargaisons
$data = json_decode(file_get_contents('data.json'), true);

// Récupérer l'ID de la cargaison à partir de l'URL
$cargoId = isset($_GET['id']) ? (int)$_GET['id'] : 0;

// Rechercher la cargaison par ID
$cargo = null;
foreach ($data['cargaisons'] as $item) {
    if ($item['id'] === $cargoId) {
        $cargo = $item;
        break;
    }
}

// Si la cargaison n'est pas trouvée, afficher un message d'erreur
if (!$cargo) {
    echo "Cargaison non trouvée";
    exit;
}
?>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails de la Cargaison</title>
    <link rel="stylesheet" href="styles.css"> <!-- Ajoutez vos styles ici -->
</head>
<body>
    <h1>Détails de la Cargaison</h1>
    <table>
        <tr><th>Numéro</th><td><?php echo htmlspecialchars($cargo['numero']); ?></td></tr>
        <tr><th>Poids Max</th><td><?php echo htmlspecialchars($cargo['poidsMax']); ?></td></tr>
        <tr><th>Produit Max</th><td><?php echo htmlspecialchars($cargo['produitMax']); ?></td></tr>
        <tr><th>Date de Départ</th><td><?php echo htmlspecialchars($cargo['dateDepart']); ?></td></tr>
        <tr><th>Date d'Arrivée</th><td><?php echo htmlspecialchars($cargo['dateArrivee']); ?></td></tr>
        <tr><th>Prix Total</th><td><?php echo htmlspecialchars($cargo['prix_total']); ?></td></tr>
        <tr><th>Lieu de Départ</th><td><?php echo htmlspecialchars($cargo['lieu_depart']); ?></td></tr>
        <tr><th>Lieu d'Arrivée</th><td><?php echo htmlspecialchars($cargo['lieu_arrivee']); ?></td></tr>
        <tr><th>Distance Km</th><td><?php echo htmlspecialchars($cargo['distanceKm']); ?></td></tr>
        <tr><th>Type</th><td><?php echo htmlspecialchars($cargo['type']); ?></td></tr>
        <tr><th>État d'Avancement</th><td><?php echo htmlspecialchars($cargo['etat_Avancement']); ?></td></tr>
        <tr><th>État Globale</th><td><?php echo htmlspecialchars($cargo['etat_globale']); ?></td></tr>
    </table>
    <a href="index.html">Retour à la liste des cargaisons</a>
</body>
</html>
function attachEventListeners() {
    const stateButtons = document.querySelectorAll('.state-btn');
    stateButtons.forEach(button => {
        button.addEventListener('click', async (event) => {
            const id = (event.target as HTMLButtonElement).dataset.id;
            await toggleCargoState(id);
        });
    });
}
async function init() {
    const cargaisons = await fetchCargos();
    filteredCargos = cargaisons; // Mettez à jour la liste filtrée
    displayCargos(filteredCargos);
}

init();


  <!-- Formulaire de recherche -->
  <div class="bg-white p-4 rounded text-black shadow-md mb-4 flex flex-col mt-4">
    <div> <input type="text" id="searchNumero" placeholder="Recherche par Numéro" class="border p-2 mb-2 w-full rounded">
    </div>
    <div class="flex flex-row">
        <div class="mb-2">
            <label for="dateDepart" class="block">Date de Départ</label>
            <input type="date" id="dateDepart" class="border p-2 w-full rounded">
        </div>
        <div class="mb-2">
            <label for="dateArrivee" class="block">Date d'Arrivée</label>
            <input type="date" id="dateArrivee" class="border p-2 w-full rounded">
        </div>
        <div class="mb-2">
            <label for="lieuDepart" class="block">Lieu de Départ</label>
            <input type="text" id="lieuDepart" placeholder="Lieu de Départ" class="border p-2 w-full rounded">
        </div>
        <div class="mb-2">
            <label for="lieuArrivee" class="block">Lieu d'Arrivée</label>
            <input type="text" id="lieuArrivee" placeholder="Lieu d'Arrivée" class="border p-2 w-full rounded">
        </div>
    </div>

    <button id="applyFilters" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Appliquer Filtres</button>
</div>




{
    "id": 1,
    "numero": "CRG001",
    "poidsMax": null,
    "produitMax": 10,
    "prix_total": 0,
    "lieu_depart": "France",
    "lieu_arrivee": "Italie",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "produitMax",
    "etat_Avancement": "En attente",
    "etat_globale": "fermer",
    "produits": [
        {
            "libelle": "Produit A",
            "poids": 2,
            "type_produit": "alimentaire",
            "prix_kg": 5,
            "prix_total": 10,
            "client": {
                "nom": "Client A",
                "telephone": "1234567890",
                "adresse": "Adresse A"
            },
            "destinataire": {
                "nom": "Destinataire A",
                "telephone": "0987654321",
                "adresse": "Adresse B"
            }
        }
    ]
},
{
    "id": 2,
    "numero": "CRG002",
    "poidsMax": 100,
    "produitMax": 10,
    "prix_total": 0,
    "lieu_depart": "France",
    "lieu_arrivee": "Italie",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "aerienne",
    "mode_remplissage": "produitMax",
    "etat_Avancement": "En attente",
    "etat_globale": "ouvert",
    "produits": [
        {
            "libelle": "Produit B",
            "poids": 50,
            "type_produit": "alimentaire",
            "prix_kg": 5,
            "prix_total": 10,
            "client": {
                "nom": "Client B",
                "telephone": "1234567890",
                "adresse": "Adresse B"
            },
            "destinataire": {
                "nom": "Destinataire B",
                "telephone": "0987654321",
                "adresse": "Adresse B"
            }
        },
        {
            "libelle": "Produit C",
            "poids": 100,
            "type_produit": "fragile",
            "prix_kg": 5,
            "prix_total": 10,
            "client": {
                "nom": "Client C",
                "telephone": "1234567890",
                "adresse": "Adresse C"
            },
            "destinataire": {
                "nom": "Destinataire C",
                "telephone": "0987654321",
                "adresse": "Adresse C"
            }
        }
    ]
},
{
    "id": 3,
    "numero": "CRG003",
    "poidsMax": 5000,
    "produitMax": null,
    "prix_total": 0,
    "lieu_depart": "Paris",
    "lieu_arrivee": "Londres",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "poidsMax",
    "etat_Avancement": "Terminer",
    "etat_globale": "fermer",
    "produits": []
},
{
    "id": 4,
    "numero": "CRG004",
    "poidsMax": 5000,
    "produitMax": null,
    "prix_total": 0,
    "lieu_depart": "Paris",
    "lieu_arrivee": "Londres",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "poidsMax",
    "etat_Avancement": "en cours",
    "etat_globale": "fermer",
    "produits": []
},
{
    "id": 5,
    "numero": "CRG005",
    "poidsMax": 5000,
    "produitMax": null,
    "prix_total": 0,
    "lieu_depart": "Paris",
    "lieu_arrivee": "Londres",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "poidsMax",
    "etat_Avancement": "En attente",
    "etat_globale": "ouvert",
    "produits": [
        {
            "libelle": "Produit B",
            "poids": 50,
            "type_produit": "alimentaire",
            "prix_kg": 5,
            "prix_total": 10,
            "client": {
                "nom": "Client B",
                "telephone": "1234567890",
                "adresse": "Adresse B"
            },
            "destinataire": {
                "nom": "Destinataire B",
                "telephone": "0987654321",
                "adresse": "Adresse B"
            }
        },
        {
            "libelle": "Produit C",
            "poids": 100,
            "type_produit": "fragile",
            "prix_kg": 5,
            "prix_total": 10,
            "client": {
                "nom": "Client C",
                "telephone": "1234567890",
                "adresse": "Adresse C"
            },
            "destinataire": {
                "nom": "Destinataire C",
                "telephone": "0987654321",
                "adresse": "Adresse C"
            }
        }
    ]
},
{
    "id": 6,
    "numero": "CRG006",
    "poidsMax": 5000,
    "produitMax": null,
    "prix_total": 0,
    "lieu_depart": "Paris",
    "lieu_arrivee": "Londres",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "poidsMax",
    "etat_Avancement": "En attente",
    "etat_globale": "ouvert",
    "produits": []
},
{
    "id": 7,
    "numero": "CRG007",
    "poidsMax": 5000,
    "produitMax": null,
    "prix_total": 0,
    "lieu_depart": "Paris",
    "lieu_arrivee": "Londres",
    "dateDepart": "10\/12\/2000",
    "dateArrivee": "10\/12\/2000",
    "distanceKm": 350,
    "type": "maritime",
    "mode_remplissage": "poidsMax",
    "etat_Avancement": "en cours",
    "etat_globale": "fermer",
    "produits": []
},
{
    "id": 1,
    "numero": "CRG001",
    "poidsMax": null,
    "produitMax": 12,
    "prix_total": 0,
    "lieu_depart": "paris",
    "lieu_arrivee": "france",
    "produits": [],
    "dateDepart": "30\/04\/2024",
    "dateArrivee": "23\/05\/2024",
    "mode_remplissage": "produitMax",
    "etat_Avancement": "En attente",
    "etat_globale": "fermer",
    "type": "aerienne",
    "distanceKm": 12
},
{
    "id": 1,
    "numero": "CRG001",
    "poidsMax": null,
    "produitMax": 1,
    "prix_total": 0,
    "lieu_depart": "paris",
    "lieu_arrivee": "france",
    "produits": [],
    "dateDepart": "16\/05\/2024",
    "dateArrivee": "16\/05\/2024",
    "mode_remplissage": "produitMax",
    "etat_Avancement": "En attente",
    "etat_globale": "ouvert",
    "type": "maritime",
    "distanceKm": 12
}